<%# app/views/items/_form.html.erb %>
<div style="max-width: 500px; margin: 2rem auto; font-family: sans-serif; color: #333;">
  
  <%# Dynamic heading: "New Item" or "Edit Item" %>
  <h1 style="text-align: center; font-size: 1.5rem; margin-bottom: 1.5rem;">
    <%= item.new_record? ? "New Item" : "Edit Item" %>
  </h1>

  <%= form_with model: item, local: true do |f| %>
    
    <div style="margin-bottom: 1rem;">
      <%= f.label :title, style: "display: block; font-weight: bold; margin-bottom: 4px;" %>
      <%= f.text_field :title, style: "width: 100%; padding: 8px; border: 2px solid black; border-radius: 8px; box-sizing: border-box;" %>
    </div>

    <div style="margin-bottom: 1rem;">
      <%= f.label :desc, "Description", style: "display: block; font-weight: bold; margin-bottom: 4px;" %>
      <%= f.text_area :desc, rows: 3, style: "width: 100%; padding: 8px; border: 2px solid black; border-radius: 8px; box-sizing: border-box;" %>
    </div>

    <div style="display: flex; gap: 10px; margin-bottom: 1rem;">
      <div style="flex: 1;">
        <%= f.label :price, style: "display: block; font-weight: bold; margin-bottom: 4px;" %>
        <%= f.number_field :price, step: 0.01, style: "width: 100%; padding: 8px; border: 2px solid black; border-radius: 8px; box-sizing: border-box;" %>
      </div>
      <div style="flex: 1;">
        <%= f.label :condition, style: "display: block; font-weight: bold; margin-bottom: 4px;" %>
        <%= f.select :condition, Item.conditions.keys.map { |k| [k.titleize, k] }, {}, { style: "width: 100%; padding: 8px; border: 2px solid black; border-radius: 8px; background: white;" } %>
      </div>
       <div style="flex: 1;">
        <%= f.label :colour, style: "display: block; font-weight: bold; margin-bottom: 4px;" %>
        <%= f.text_field :colour, style: "width: 100%; padding: 8px; border: 2px solid black; border-radius: 8px; box-sizing: border-box;" %>
      </div>
    </div>

    <div style="margin-bottom: 1rem;">
      <%= f.label :image, style: "display: block; font-weight: bold; margin-bottom: 4px;" %>
      <%= f.file_field :image, style: "font-size: 0.9rem;" %>
    </div>

    <div style="margin-bottom: 1rem; padding: 10px; background: #f9f9f9; border: 2px solid black; border-radius: 8px;">
      <span style="display: block; font-weight: bold; margin-bottom: 8px;">Categories</span>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px; font-size: 0.9rem;">
        <%= f.collection_check_boxes :category_ids, Category.all, :id, :kind do |b| %>
          <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
            <%= b.check_box %> <%= b.text.titleize %>
          </label>
        <% end %>
      </div>
    </div>

    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 1.5rem;">
      <%= f.check_box :is_negotiable %>
      <%= f.label :is_negotiable, "Negotiable?", style: "font-size: 0.9rem; cursor: pointer;" %>
    </div>

    <%# The button will automatically say "Create Item" or "Update Item" %>
    <%= f.submit nil, class: "btn-brutal", style: "width: 100%; background: #000; color: #fff; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; box-shadow: 4px 4px 0px #666;" %>

  <% end %>
</div>