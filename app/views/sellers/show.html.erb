<div style="width: 100%; display: flex; flex-direction: column; align-items: center; margin-top: 30px;">
  
  <h2 style="border-bottom: 2px solid black; padding-bottom: 10px; width: fit-content; margin-bottom: 20px;">
    Customer Reviews
  </h2>

  <% if @reviews.any? %>
    <div class="reviews-grid" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 25px; width: 90%; max-width: 1200px;">
      
      <% @reviews.each do |review| %>
        <div class="review-card" style="flex: 0 1 300px; border: 3px solid black; padding: 20px; background: #fff; box-shadow: 8px 8px 0px 0px rgba(0,0,0,1); display: flex; flex-direction: column; justify-content: space-between; min-height: 200px;">
          
          <div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
              <span style="font-weight: bold; font-size: 1.1em; color: #f39c12;">
                <% review.rating.to_i.times do %>‚òÖ<% end %>
                <span style="color: black;">(<%= review.rating %>)</span>
              </span>
<div class="review-likes">
  <% existing_like = review.likes.find_by(buyer: current_user.buyer) %>

  <% if existing_like %>
    <%= button_to like_path(existing_like),
                  method: :delete,
                  style: "background: none; border: none; cursor: pointer; font-size: 1.2em; display: flex; align-items: center; gap: 5px;" do %>
      <span style="color: #e74c3c;">‚ù§Ô∏è</span>
      <small style="font-weight: bold; color: black;"><%= review.likes.count %></small>
    <% end %>
  <% else %>
    <%= button_to like_review_review_path(review),
                  method: :post,
                  style: "background: none; border: none; cursor: pointer; font-size: 1.2em; display: flex; align-items: center; gap: 5px;" do %>
      <span style="color: #ccc;">ü§ç</span>
      <small style="font-weight: bold; color: black;"><%= review.likes.count %></small>
    <% end %>
  <% end %>
</div>
            </div>

            <p style="margin: 10px 0; line-height: 1.6; font-style: italic; font-size: 1em;">
              "<%= review.comment %>"
            </p>
          </div>

          <div style="font-size: 0.85em; border-top: 2px solid #eee; padding-top: 12px; margin-top: 15px;">
            <strong style="text-transform: uppercase; letter-spacing: 1px;">
              <%= review.reviewer.userable.name %>
            </strong>
            <div style="color: #777; margin-top: 4px;">
              <%= review.created_at.strftime("%b %d, %Y") %>
            </div>
          </div>
        </div>
      <% end %>

    </div>
  <% else %>
    <p style="color: #666; font-style: italic; text-align: center;">No reviews yet for this seller.</p>
  <% end %>

  <h2 style="border-bottom: 4px solid black; width: fit-content; margin: 40px 0 20px 0;">
    Items for Sale
  </h2>

  <%# Grid for Items - Make sure the item partial also uses turbo_frame_tag for its likes! %>
  <div class="items-grid" style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">
    <%= render partial: 'items/item', collection: @items, as: :item %>
  </div>
</div>